#include <bits/stdc++.h>
using namespace std;

int m,dp[20][200];
int solve(vector <vector<int>>v,int c,int money,int res) {
    if (money < 0) {
        return INT_MAX;
    }if(c<0){
        return m - money;
    }if(dp[c][money] != -1) {
        return dp[c][money];
    }for(int i = 0;i<v[c].size();i++){
        res = max(res, solve(v, c-1 , money - v[c][i], res));
    }
    return dp[c][money] = res;
}
int main() {
    freopen("input.txt", "r", stdin); freopen("output.txt", "w", stdout);
    int t;
    vector <vector<int>>v;
    int c,res,b,a;
    cin >> t;
    while(t--){
        memset(dp,-1,sizeof dp);
        cin >> m >> c;
        v.clear();
        v.resize(c);
        res = INT_MIN;
        for(int i = 0;i<c;i++){
            cin >> a;
            for(int j = 0;j<a;j++) {
                cin >> b;
                v[i].push_back(b);
            }
        }
    }
    cout << solve(v,c-1,m,res) << "\n";

    fclose(stdin); fclose(stdout);
    return 0;
}
